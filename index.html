<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ROIDER Guild Command Center</title>

<style>
:root {
  --bg: #0f1220;
  --card: #171a2b;
  --text: #e5e7ff;
  --accent: #f4c430;
  --muted: #9aa0ff;
  --border: #2a2f55;
}

[data-theme="light"] {
  --bg: #f3f4fb;
  --card: #ffffff;
  --text: #111;
  --accent: #f4c430;
  --muted: #666;
  --border: #ddd;
}

body {
  margin: 0;
  font-family: Pretendard, system-ui, -apple-system, sans-serif;
  background: linear-gradient(180deg, #0b1022, #060916);
  color: var(--text);
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: rgba(20,25,60,0.9);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--border);
}

header h1 {
  margin: 0;
  font-size: 20px;
  color: var(--accent);
}

nav button {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  margin-right: 6px;
}

nav button.active {
  background: var(--accent);
  color: #000;
  font-weight: bold;
}

main {
  padding: 20px;
  max-width: 1200px;
  margin: auto;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}

h2 {
  margin-top: 0;
  color: var(--accent);
}

.grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}

.day {
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px;
  text-align: center;
  font-size: 12px;
}

.day.disabled {
  opacity: 0.3;
  pointer-events: none;
}

.day button {
  margin-top: 4px;
  font-size: 11px;
  padding: 4px;
  width: 100%;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  background: var(--accent);
}

input, select {
  padding: 8px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 8px;
  border-bottom: 1px solid var(--border);
  text-align: left;
}

footer {
  text-align: center;
  padding: 20px;
  color: var(--muted);
}
</style>
</head>

<body data-theme="dark">

<header>
  <h1>ğŸ† ROIDER Guild Command Center</h1>
  <div>
    <select id="themeSelect">
      <option value="dark">ë‹¤í¬</option>
      <option value="light">ë¼ì´íŠ¸</option>
      <option value="system">ì‹œìŠ¤í…œ</option>
    </select>
  </div>
</header>

<nav style="padding:10px; text-align:center;">
  <button onclick="showView('notice')" class="active">ğŸ“¢ ê³µì§€</button>
  <button onclick="showView('members')">ğŸ‘¥ ê¸¸ë“œì›</button>
  <button onclick="showView('attendance')">ğŸ“… ì¶œì„ë¶€</button>
  <button onclick="showView('weekly')">ğŸ† ì£¼ê°„ê²°ì‚°</button>
  <button onclick="showView('war')">âš”ï¸ ëŒ€í•­ì „</button>
</nav>

<main>
  <div id="notice" class="card view">
    <h2>ğŸ“¢ ê³µì§€</h2>
    <p>ê¸¸ë“œ ê³µì§€ì‚¬í•­ ì˜ì—­ (ê´€ë¦¬ì ì „ìš© ì˜ˆì •)</p>
  </div>

  <div id="members" class="card view" style="display:none;">
    <h2>ğŸ‘¥ ê¸¸ë“œì›</h2>
    <ul id="memberList"></ul>
  </div>

  <div id="attendance" class="card view" style="display:none;">
    <h2>ğŸ“… ì¶œì„ë¶€</h2>
    <div class="grid" id="calendar"></div>
  </div>

  <div id="weekly" class="card view" style="display:none;">
    <h2>ğŸ† ì£¼ê°„ê²°ì‚°</h2>
    <table>
      <thead>
        <tr><th>ë‹‰ë„¤ì„</th><th>ì´ê³„</th><th>ëª…ê²°</th><th>í•©ê³„</th></tr>
      </thead>
      <tbody id="weeklyTable"></tbody>
    </table>
  </div>

  <div id="war" class="card view" style="display:none;">
    <h2>âš”ï¸ ëŒ€í•­ì „</h2>
    <p>ëŒ€í•­ì „ ì „ëµ ë°°ì¹˜ UI (í™•ì¥ ì˜ˆì •)</p>
  </div>
</main>

<footer>
  AFK Journey Fanmade Tool â€“ ROIDER Guild
</footer>

<script>
const members = ["ê°“ë„¬ë¼", "ì¬ê´‘", "ë£¨ì‹œ", "í•˜ì´ë“ ", "ì—ë¦­", "í…Œì˜¤", "ì•„ë¦¬ì•„"];
const attendance = JSON.parse(localStorage.getItem("attendance") || "{}");

function showView(id) {
  document.querySelectorAll(".view").forEach(v => v.style.display = "none");
  document.getElementById(id).style.display = "block";
  document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
  if (id === "weekly") renderWeekly();
}

function renderMembers() {
  const ul = document.getElementById("memberList");
  ul.innerHTML = "";
  members.forEach(m => {
    const li = document.createElement("li");
    li.textContent = m;
    ul.appendChild(li);
  });
}

function renderCalendar() {
  const cal = document.getElementById("calendar");
  cal.innerHTML = "";
  const now = new Date();
  const days = new Date(now.getFullYear(), now.getMonth()+1, 0).getDate();

  for (let d = 1; d <= days; d++) {
    const dateKey = `${now.getFullYear()}-${now.getMonth()+1}-${d}`;
    const div = document.createElement("div");
    div.className = "day";
    if (d > now.getDate()) div.classList.add("disabled");
    div.innerHTML = `<strong>${d}</strong>
      <button onclick="mark('${dateKey}')">ì¶œì„</button>`;
    cal.appendChild(div);
  }
}

function mark(key) {
  if (!attendance[key]) attendance[key] = { laby: 0, duel: 0 };
  attendance[key].laby += 1;
  attendance[key].duel += 1;
  localStorage.setItem("attendance", JSON.stringify(attendance));
  alert("ì¶œì„ ì™„ë£Œ");
}

function renderWeekly() {
  const tbody = document.getElementById("weeklyTable");
  tbody.innerHTML = "";
  members.forEach(m => {
    let laby = 0, duel = 0;
    Object.values(attendance).forEach(v => {
      laby += v.laby;
      duel += v.duel;
    });
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${m}</td><td>${laby}</td><td>${duel}</td><td>${laby+duel}</td>`;
    tbody.appendChild(tr);
  });
}

document.getElementById("themeSelect").addEventListener("change", e => {
  const val = e.target.value;
  if (val === "system") {
    const isDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    document.body.dataset.theme = isDark ? "dark" : "light";
  } else {
    document.body.dataset.theme = val;
  }
});

renderMembers();
renderCalendar();
</script>

</body>
</html>
